<%- layout('boilerplate') %>

<header class="header">
  <div class="header-contents">
    <a href="/">
      <h1 class="greet-user">
        Hello, <br />
        <span><%= user.firstName%></span>
      </h1>
    </a>
    <form
      class="search-form"
      action="/<%= user.username %>/search"
      method="GET"
    >
      <input
        class="search-input"
        type="text"
        name="tag"
        id="tag"
        placeholder="Search..."
        required
      />
      <button class="search-btn">
        <div class="search-icon">
          <i class="fas fa-search"></i>
        </div>
      </button>
    </form>
  </div>
</header>

<div class="expense-balance-container">
  <div class="balance">
    <p>Balance</p>
    <h3>&#8377; <%= user.balance %></h3>
  </div>

  <div class="total-expense">
    <p>Total expense</p>
    <h3>
      &#8377; <%= user.totalExpense %> <span><%= tag ? `(${tag})` : '' %></span>
    </h3>
  </div>
</div>

<% for(expense of user.expenses.reverse()) { %>
<div class="expense">
  <div class="left-part">
    <h3><%= expense.name %></h3>
    <p><%= expense.date.toDateString() %></p>
  </div>
  <div class="right-part">
    <p>&#8377;<%= expense.amount %></p>
    <form action="/expense/<%= expense.id %>?_method=DELETE" method="POST">
      <button class="delete-btn"><i class="fas fa-trash"></i></button>
    </form>
  </div>
</div>
<% } %>

<nav class="navbar">
  <div class="links">
    <a href="/">
      <img src="images/home.svg" alt="home icon" />
    </a>
    <div class="add-expense">
      <img src="images/plus-circle.svg" alt="add icon" />
    </div>
    <a href="/">
      <img src="images/user.svg" alt="user icon" />
    </a>
  </div>
</nav>

<div class="overlay"></div>

<form class="expense-form" action="/expense" method="POST">
  <div class="form-input">
    <label for="name">Spent On</label>
    <input type="text" name="name" id="name" autofocus required />
  </div>
  <div class="form-input">
    <label for="amount">Amount</label>
    <input type="number" name="amount" id="amount" min="0" required />
  </div>
  <div class="form-input">
    <label for="tags">Tags</label>
    <input type="text" name="tags" id="tags" required />
  </div>

  <button class="add-btn"><img src="images/check-circle.svg" alt="" /></button>
</form>



<!-- <a href="/logout">Logout</a>
<a href="/balance">Update balance</a> -->
